{% extends "base.html" %}

{% block title %}Detrans do Brasil - WDespachante{% endblock %}

{% block meta_description %}Consulte a lista completa dos Detrans (Departamentos Estaduais de Trânsito) de todas as regiões do Brasil, com links diretos para seus sites oficiais.{% endblock %}

{% block content %}
<section class="bg-primary-dark text-white py-20">
    <div class="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8 text-center">
        <h1 class="text-4xl md:text-5xl font-extrabold font-heading">Detrans do Brasil</h1>
        <p class="text-lg text-blue-200 mt-4 max-w-3xl mx-auto">
            Encontre informações e links para os sites oficiais dos Departamentos Estaduais de Trânsito de todo o país.
        </p>
    </div>
</section>

<section class="bg-light py-20">
    <div class="container mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
        {% if detrans %}
            {% set regions = detrans|groupby('region') %}
            {% for region_name, detrans_in_region in regions|sort %}
                <div class="mb-12 last:mb-0">
                    <h2 class="text-3xl font-bold font-heading text-dark mb-8 border-b-2 border-primary-light pb-4">{{ region_name }}</h2>
                    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6">
                        {% for detran in detrans_in_region|sort(attribute='state') %}
                            <div class="bg-white rounded-lg shadow-md hover:shadow-xl transition-shadow duration-300 flex flex-col overflow-hidden">
                                {% if detran.flag_image %}
                                <div class="w-full h-24 bg-gray-100 flex items-center justify-center p-2">
                                    <img src="{{ url_for('static', filename='images/flags/' + detran.flag_image) }}" alt="Bandeira {{ detran.state_abbr }}" class="max-h-full max-w-full object-contain">
                                </div>
                                {% endif %}
                                <div class="p-5 flex-grow">
                                    <h3 class="text-xl font-bold font-heading text-dark mb-2">{{ detran.state }} ({{ detran.state_abbr }})</h3>
                                    <p class="text-gray-600 text-sm mb-3">{{ detran.name }}</p>
                                    {% if detran.description %}
                                        <p class="text-gray-700 text-sm mb-4">{{ detran.description }}</p>
                                    {% endif %}
                                </div>
                                <div class="p-5 border-t border-gray-200 mt-auto">
                                    <a href="{{ detran.url }}" target="_blank" class="font-semibold text-primary hover:text-secondary transition-colors flex items-center gap-2">
                                        Site Oficial <i class="fas fa-external-link-alt"></i>
                                    </a>
                                </div>
                            </div>
                        {% endfor %}
                    </div>
                </div>
            {% endfor %}
        {% else %}
            <p class="text-center text-gray-500 text-lg">Nenhum Detran disponível no momento.</p>
        {% endif %}
    </div>
</section>
{% endblock %} 